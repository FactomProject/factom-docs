# Security

## Encrypted Connections

When factomd is run with TLS enabled, the calling program needs to specify the certificate file generated by factomd. This is how to use curl with TLS:

`curl -X POST --cacert ~/.factom/m2/factomdAPIpub.cert --data-binary '{"jsonrpc":"2.0","id":0,"method":"properties"}' -H 'content-type:text/plain;' https://localhost:8088/v2`

## Password Protection

When factomd is run with a password, it uses HTTP Basic Authentication. It is recommended to encrypt the connection when using a password, because otherwise the password can be sniffed on the network. Here is how to run with just the password:

`curl -X POST -u userHere:securePassHere --data-binary '{"jsonrpc":"2.0","id":0,"method":"properties"}' -H 'content-type:text/plain;' http://localhost:8088/v2`

## Combined Password and Encryption

`curl -X POST -u userHere:securePassHere --cacert ~/.factom/m2/factomdAPIpub.cert --data-binary '{"jsonrpc":"2.0","id":0,"method":"properties"}'
-H 'content-type:text/plain;' https://localhost:8088/v2`

## Creating Certificates

Normally, when started the program creates a new certificate if one is not found. The certificates are bound to a set of specific IP addresses.

Normally it finds the IP address by asking the OS. When using cloud services that use a different public IP than the server sees (AWS, Azure) the certificate needs to be told what the external IP address is manually. There are two options for this.

1 - Edit the config file to show the external IP address instead of localhost for FactomdLocation.

2 - Start factomd with the selfaddr flag and pass a comma separated list of authorized domains and IP addresses:

`factomd -tls=true -selfaddr=domain.net,123.23.111.444`